# demo-db-docker

## Introduction

This repo is used for the case study and hands-on tutorial [Build an OpenShift certifiable image from a complex application with Cloud-Native Toolkit and OpenShift pipeline](linkTBD).
For the case study, we started with the JanusGraph database open source repos:

* https://github.com/JanusGraph/janusgraph
* https://github.com/JanusGraph/janusgraph-docker

**Instead of forking the JanusGraph repos** and potentially generating noise and distractions for the JanusGraph community (e.g., accidental PRs and abnormal spikes in forks), we are providing repos that are a snapshot of those repos. This will allow you to walk through this case study using our copies. Our repos:

* https://github.com/IBM/demo-db
* https://github.com/IBM/demo-db-docker

This repo (demo-db-docker) is intended to be used by developers as they go through the tutorial. Forks currently are not required. This is supporting a poly-repo example for keeping multiple versions of Dockerfiles in a repo.

This repo is intended for the tutorial only and not as a maintained fork of the official JanusGraph content.

## Modifications

Our "snapshot" of the original repo has been modified.

1. We added files to build an image suitable for OpenShift certification
1. We added Helm charts for deployment

### Added files for building a certifiable image

* 0.5/Dockerfile-rhos
* 0.5/docker-entrypoint-rhos.sh
* 0.5/conf/gremlin-server-rhos.yaml

### Added Helm chart files

* chart/
* chart/base/
* chart/base/.helmignore
* chart/base/Chart.yaml
* chart/base/templates/NOTES.txt
* chart/base/templates/_helpers.tpl
* chart/base/templates/deployment.yaml
* chart/base/templates/ingress.yaml
* chart/base/templates/route.yaml
* chart/base/templates/service.yaml
* chart/base/values.yaml

The Helm charts were generated by Cloud-Native Toolkit (`igc enable`) and then modified to work with JanusGraph.

## Branches

We are using `main` as the default branch (no release branches). This was originally master, but we renamed it. The working files in the repo are kept in separate directories for each `major.minor` release. The latest maintenance updates for each release is kept on main.

The only release directory currently being used in the tutorial is `0.5`. It is significant, however, that we do have a release directory structure.

## JanusGraph License

The original repo is licensed under the [Apache License, Version 2](https://github.com/JanusGraph/janusgraph-docker/blob/master/LICENSE).

Considering this is mostly a snapshot of the original. That license still applies.

## IBM License

Fortunately, we also like the Apache License, Version 2 with the following note:

This code pattern is licensed under the Apache License, Version 2. Separate third-party code objects invoked within this code pattern are licensed by their respective providers pursuant to their own separate licenses. Contributions are subject to the [Developer Certificate of Origin, Version 1.1](https://developercertificate.org/) and the [Apache License, Version 2](https://www.apache.org/licenses/LICENSE-2.0.txt).

[Apache License FAQ](https://www.apache.org/foundation/license-faq.html#WhatDoesItMEAN)

